npm warn Unknown cli config "--coverage". This will stop working in the next major version of npm.

> @publishing-tracker/ui-react@0.0.0 test
> jest ImportPage.test.tsx

  console.log
    Import result from API: {
      id: 1,
      fileName: 'test.csv',
      status: 'Completed',
      startedAt: 2024-01-01T00:00:00.000Z,
      completedAt: 2024-01-01T00:00:00.000Z,
      recordsProcessed: 15,
      recordsSuccessful: 13,
      recordsFailed: 2,
      errorLog: 'Row 5: Duplicate order ID\nRow 8: Invalid quantity'
    }

      at handleProcess (src/pages/ImportPage.tsx:74:25)

  console.log
    Records successful: 13

      at handleProcess (src/pages/ImportPage.tsx:75:25)

  console.log
    Records failed: 2

      at handleProcess (src/pages/ImportPage.tsx:76:25)

  console.log
    Records processed: 15

      at handleProcess (src/pages/ImportPage.tsx:77:25)

  console.log
    Import result from API: {
      id: 2,
      fileName: 'test.csv',
      status: 'Completed',
      startedAt: 2024-01-01T00:00:00.000Z,
      completedAt: 2024-01-01T00:00:00.000Z,
      recordsProcessed: 5,
      recordsSuccessful: 0,
      recordsFailed: 5,
      errorLog: 'All records had duplicate order IDs'
    }

      at handleProcess (src/pages/ImportPage.tsx:74:25)

  console.log
    Records successful: 0

      at handleProcess (src/pages/ImportPage.tsx:75:25)

  console.log
    Records failed: 5

      at handleProcess (src/pages/ImportPage.tsx:76:25)

  console.log
    Records processed: 5

      at handleProcess (src/pages/ImportPage.tsx:77:25)

FAIL src/pages/ImportPage.test.tsx
  ImportPage
    ├ù should render the upload step initially (45 ms)
    ├ù should display summary with correct numbers after successful import (1114 ms)
    ΓêÜ should handle all records failed scenario (77 ms)

  ΓùÅ ImportPage ΓÇ║ should render the upload step initially

    TestingLibraryElementError: Found multiple elements with the text: /Upload Sales Data/i

    Here are the matching elements:

    Ignored nodes: comments, script, style
    <p
      style="color: var(--text-main); font-size: 1.2rem; margin: 1rem 0px 2rem 0px; opacity: 0.9;"
    >
      Upload sales data from your publishing platform (KDP, IngramSpark, etc.)
    </p>

    Ignored nodes: comments, script, style
    <p
      style="margin-top: 0.5rem; font-size: 1.2rem; color: var(--text-main); opacity: 0.9; font-weight: 500;"
    >
      Upload sales data from your publishing platform
    </p>

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          style="max-width: 900px; margin: 0px auto;"
        >
          <h1
            style="color: rgb(30, 41, 59); background: none; -webkit-text-fill-color: initial; opacity: 1; margin-bottom: 2rem;"
          >
            Import Sales Data (v2.1)
          </h1>
          <div
            style="display: flex; margin-bottom: 2rem; padding: 1rem 0px;"
          >
            <div
              style="display: flex; align-items: center;"
            >
              <div
                style="width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; background-color: var(--primary); color: white;"
              >
                1
              </div>
              <span
                style="margin-left: 8px; margin-right: 16px; font-weight: 600; color: var(--text-main);"
              >
                Upload
              </span>
            </div>
            <div
              style="display: flex; align-items: center;"
            >
              <div
                style="width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; background-color: rgb(226, 232, 240); color: white;"
              >
                2
              </div>
              <span
                style="margin-left: 8px; margin-right: 16px; font-weight: 400; color: var(--text-muted);"
              >
                Mapping
              </span>
            </div>
            <div
              style="display: flex; align-items: center;"
            >
              <div
                style="width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; background-color: rgb(226, 232, 240); color: white;"
              >
                3
              </div>
              <span
                style="margin-left: 8px; margin-right: 16px; font-weight: 400; color: var(--text-muted);"
              >
                Summary
              </span>
            </div>
          </div>
          <div
            class="card"
            style="padding: 2.5rem;"
          >
            <div
              style="animation: fadeIn 0.3s ease;"
            >
              <h3>
                Step 1: Upload Data
              </h3>
              <p
                style="color: var(--text-main); font-size: 1.2rem; margin: 1rem 0px 2rem 0px; opacity: 0.9;"
              >
                Upload sales data from your publishing platform (KDP, IngramSpark, etc.)
              </p>
              <div
                style="border: 2px dashed var(--border); border-radius: 12px; padding: 3rem 2rem; text-align: center; background-color: rgba(255, 255, 255, 0.03); cursor: pointer; position: relative; transition: all 0.3s ease;"
              >
                <input
                  accept=".csv,.txt"
                  id="file-upload"
                  style="position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 0; cursor: pointer; z-index: 10;"
                  type="file"
                />
                <label
                  for="file-upload"
                  style="color: var(--text-main); font-size: 1.1rem; display: flex; flex-direction: column; align-items: center; gap: 1rem;"
                >
                  <div
                    style="font-size: 3rem; margin-bottom: 0.5rem; opacity: 1; color: var(--primary);"
                  >
                    ≡ƒôé
                  </div>
                  <span
                    class="btn-primary"
                    style="display: inline-block; padding: 0.8rem 2rem; pointer-events: none; font-size: 1.1rem; margin-bottom: 0.5rem;"
                  >
                    Browse Files
                  </span>
                  <p
                    style="margin-top: 0.5rem; font-size: 1.2rem; color: var(--text-main); opacity: 0.9; font-weight: 500;"
                  >
                    Upload sales data from your publishing platform
                  </p>
                </label>
              </div>
              <div
                style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border);"
              >
                <button
                  class="btn-primary"
                  disabled=""
                  style="opacity: 0.5; cursor: not-allowed;"
                >
                  Next: Map Columns
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      20 |         );
      21 |
    > 22 |         expect(screen.getByText(/Upload Sales Data/i)).toBeInTheDocument();
         |                       ^
      23 |         expect(screen.getByText(/Step 1: Upload Data/i)).toBeInTheDocument();
      24 |     });
      25 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (src/pages/ImportPage.test.tsx:22:23)

  ΓùÅ ImportPage ΓÇ║ should display summary with correct numbers after successful import

    Found multiple elements with the text: /Successful/i

    Here are the matching elements:

    Ignored nodes: comments, script, style
    <pre
      style="margin: 0.5rem 0px; white-space: pre-wrap; word-wrap: break-word;"
    >
      {
      "id": 1,
      "fileName": "test.csv",
      "status": "Completed",
      "startedAt": "2024-01-01T00:00:00.000Z",
      "completedAt": "2024-01-01T00:00:00.000Z",
      "recordsProcessed": 15,
      "recordsSuccessful": 13,
      "recordsFailed": 2,
      "errorLog": "Row 5: Duplicate order ID\nRow 8: Invalid quantity"
    }
    </pre>

    Ignored nodes: comments, script, style
    <span
      style="font-size: 0.875rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;"
    >
      Successful
    </span>

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          style="max-width: 900px; margin: 0px auto;"
        >
          <h1
            style="color: rgb(30, 41, 59); background: none; -webkit-text-fill-color: initial; opacity: 1; margin-bottom: 2rem;"
          >
            Import Sales Data (v2.1)
          </h1>
          <div
            style="display: flex; margin-bottom: 2rem; padding: 1rem 0px;"
          >
            <div
              style="display: flex; align-items: center;"
            >
              <div
                style="width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; background-color: rgb(16, 185, 129); color: white;"
              >
                1
              </div>
              <span
                style="margin-left: 8px; margin-right: 16px; font-weight: 400; color: var(--text-muted);"
              >
                Upload
              </span>
            </div>
            <div
              style="display: flex; align-items: center;"
            >
              <div
                style="width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; background-color: rgb(16, 185, 129); color: white;"
              >
                2
              </div>
              <span
                style="margin-left: 8px; margin-right: 16px; font-weight: 400; color: var(--text-muted);"
              >
                Mapping
              </span>
            </div>
            <div
              style="display: flex; align-items: center;"
            >
              <div
                style="width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; background-color: var(--primary); color: white;"
              >
                3
              </div>
              <span
                style="margin-left: 8px; margin-right: 16px; font-weight: 600; color: var(--text-main);"
              >
                Summary
              </span>
            </div>
          </div>
          <div
            class="card"
            style="padding: 2.5rem;"
          >
            <div
              style="animation: fadeIn 0.3s ease; text-align: center;"
            >
              <div
                style="width: 60px; height: 60px; border-radius: 50%; background-color: rgb(16, 185, 129); color: white; font-size: 2rem; display: flex; align-items: center; justify-content: center; margin: 0px auto 1.5rem;"
              >
                Γ£ô
              </div>
              <h3
                style="margin-bottom: 1.5rem;"
              >
                Import Synchronized
              </h3>
              <div
                style="background-color: rgb(240, 240, 240); padding: 1rem; margin-bottom: 1rem; border-radius: 8px; text-align: left; font-size: 0.85rem;"
              >
                <strong>
                  DEBUG - Raw API Response:
                </strong>
                <pre
                  style="margin: 0.5rem 0px; white-space: pre-wrap; word-wrap: break-word;"
                >
                  {
      "id": 1,
      "fileName": "test.csv",
      "status": "Completed",
      "startedAt": "2024-01-01T00:00:00.000Z",
      "completedAt": "2024-01-01T00:00:00.000Z",
      "recordsProcessed": 15,
      "recordsSuccessful": 13,
      "recordsFailed": 2,
      "errorLog": "Row 5: Duplicate order ID\nRow 8: Invalid quantity"
    }
                </pre>
              </div>
              <div
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 2rem 0px;"
              >
                <div
                  style="padding: 1.5rem; background-color: rgb(248, 250, 252); border-radius: 12px; border: 1px solid var(--border); display: flex; flex-direction: column; gap: 0.5rem;"
                >
                  <span
                    style="font-size: 0.875rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;"
                  >
                    Successful
                  </span>
                  <span
                    class="text-success"
                    style="font-size: 1.5rem; font-weight: 700; color: var(--text-main);"
                  >
                    13
                  </span>
                </div>
                <div
                  style="padding: 1.5rem; background-color: rgb(248, 250, 252); border-radius: 12px; border: 1px solid var(--border); display: flex; flex-direction: column; gap: 0.5rem;"
                >
                  <span
                    style="font-size: 0.875rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;"
                  >
                    Failed
                  </span>
                  <span
                    class="text-danger"
                    style="font-size: 1.5rem; font-weight: 700; color: var(--text-main);"
                  >
                    2
                  </span>
                </div>
                <div
                  style="padding: 1.5rem; background-color: rgb(248, 250, 252); border-radius: 12px; border: 1px solid var(--border); display: flex; flex-direction: column; gap: 0.5rem;"
                >
                  <span
                    style="font-size: 0.875rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;"
                  >
                    Accuracy
                  </span>
                  <span
                    style="font-size: 1.5rem; font-weight: 700; color: var(--text-main);"
                  >
                    87
                    %
                  </span>
                </div>
              </div>
              <div
                style="height: 8px; background-color: rgb(226, 232, 240); border-radius: 4px; margin: 2rem 0px; overflow: hidden;"
              >
                <div
                  style="height: 100%; background-color: rgb(16, 185, 129); transition: width 1s ease-out; width: 86.66666666666667%;"
                />
              </div>
              <div
                style="text-align: left; margin-top: 2.5rem; padding: 1.5rem; background-color: rgb(255, 241, 242); border-radius: 12px; border: 1px solid rgb(254, 202, 202);"
              >
                <div
                  style="font-size: 0.75rem; font-weight: 800; text-transform: uppercase; color: rgb(153, 27, 27); margin-bottom: 0.75rem; letter-spacing: 0.05em;"
                >
                  Diagnostic Audit Trail
                </div>
                <pre
                  style="white-space: pre-wrap; font-size: 0.85rem; color: rgb(153, 27, 27); margin-top: 0.5rem; max-height: 150px; overflow-y: auto;"
                >
                  Row 5: Duplicate order ID
    Row 8: Invalid quantity
                </pre>
              </div>
              <div
                style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border);"
              >
                <button
                  class="btn-primary"
                >
                  Go to Sales Ledger
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      78 |
      79 |         // Check that the numbers are displayed
    > 80 |         await waitFor(() => {
         |                      ^
      81 |             // Look for the actual number values
      82 |             const successfulElements = screen.getAllByText('13');
      83 |             const failedElements = screen.getAllByText('2');

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/pages/ImportPage.test.tsx:80:22)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 1 passed, 3 total
Snapshots:   0 total
Time:        2.238 s
Ran all test suites matching ImportPage.test.tsx.
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path C:\Github\PublishingTracker\Publishing-Tracker\apps\ui-react\publishing-tracker-ui
npm error workspace @publishing-tracker/ui-react@0.0.0
npm error location C:\Github\PublishingTracker\Publishing-Tracker\apps\ui-react\publishing-tracker-ui
npm error command failed
npm error command C:\Windows\system32\cmd.exe /d /s /c jest ImportPage.test.tsx
